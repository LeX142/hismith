## Hi-Smith тестовое задание

###
### Запуск и подготовка образов для работы
###

Описание задания находится в файле `php8.pdf`

Собираем docker образы и создаем контейнеры для проверки задания:
```
docker-compose up 
```
Устанавливаем зависимости из файла composer.json
```
docker-compose exec php composer install 
```
Генерируем spec.yml со схемой Swagger из описаний в php файлах. Описание для генерации spec.yml
сделано с использование пакет zircote/swagger-php на основе аттрибутов PHP.
```
docker-compose exec php composer openapi-generate 
```
Запускаем миграции в базу данных
```
docker-compose exec php /usr/local/bin/php artisan migrate --step --seed 
```

Тестирование работы команды импорта.
```
docker-compose exec php vendor/bin/phpunit 
```

###
### Импортирование данных 
###

Для запуска скрипта Laravel ежеминутного выполнения команды импортирования данных 
необходимо выполнить команду: 
```
docker-compose exec php /usr/local/bin/php artisan schedule:work 
```
Для ручного запуска команды импорта данных из указанного в задании rss feed:
```
docker-compose exec php /usr/local/bin/php artisan import:feed rbc-news 
```
Схема базы данных подразумевает импортирование новостей из разных rss feed. 
Каждый ресурс с исходными данными должен иметь свой уникальный идентификатор, 
который необходимо указывать параметром команды импорта.

При импорте новостей и изображений идет предварительная проверка на существования 
такой записи в БД с использованием поля `source_url`

Так как одна новость может иметь несколько изображений и некоторые изображения могут
использоваться в разных новостях в БД используем pivot таблицу для связывания сущностей
`News` и `Image`.

###
### Получение списка импортированных новостей
###

Чтобы получить список новостей необходимо отправить запрос по урлу
`http://localhost:8988/api/news/`

Возможные параметры запроса для данного урла описаны в файле `spec.yml`
Краткий список параметров:

* per_page - количество выводимых новостей на одной странице
* page - страница для показа
* fields[news] - массив перечислений полей сущности News, которые необходимо показать в выдаче
* include - при необходимости добавляем зависимые сущности для показа (**images**, **author**). 
  Сущность author добавляется при отсутствии параметра include в строке запроса.
* sort - сортировка вывода новостей. 
  Возможные значения
    - **-published_at** - по дате публикации в порядке убывания (по умолчанию)
    - **published_at** - по дате публикации в порядке возрастания


